╔═══════════════════════════════════════════════════════════════════════╗
║                                                                       ║
║   🚀 DÉPLOIEMENT RAPIDE VPS - testing.mesnew.fr                      ║
║                                                                       ║
║   Votre repo est cloné sur le VPS → Suivez ces étapes !             ║
║                                                                       ║
╚═══════════════════════════════════════════════════════════════════════╝

┌───────────────────────────────────────────────────────────────────────┐
│ ✅ PRÉREQUIS                                                          │
└───────────────────────────────────────────────────────────────────────┘

  [✓] Repo cloné sur le VPS
  [✓] DNS testing.mesnew.fr → IP VPS configuré (OVH Manager)
  [✓] Accès SSH au VPS


┌───────────────────────────────────────────────────────────────────────┐
│ 📋 MÉTHODE 1 : AUTOMATIQUE (RECOMMANDÉ)                              │
└───────────────────────────────────────────────────────────────────────┘

Sur votre VPS :

  1. cd /chemin/vers/portfolio-threejs

  2. chmod +x setup-vps.sh

  3. ./setup-vps.sh

  4. Suivre les instructions à l'écran

  ✅ TERMINÉ ! Visitez https://testing.mesnew.fr


┌───────────────────────────────────────────────────────────────────────┐
│ 🔧 MÉTHODE 2 : MANUELLE (Étape par étape)                            │
└───────────────────────────────────────────────────────────────────────┘

Sur votre VPS :

┌─────────────────────────────────────────────────────────────────────┐
│ ÉTAPE 1 : Aller dans le dossier du projet                          │
└─────────────────────────────────────────────────────────────────────┘

  $ cd /chemin/vers/portfolio-threejs
  $ ls

  → Vous devez voir : package.json, src/, vite.config.js, etc.


┌─────────────────────────────────────────────────────────────────────┐
│ ÉTAPE 2 : Installer Node.js (si pas déjà fait)                     │
└─────────────────────────────────────────────────────────────────────┘

  $ node --version

  Si version < 18 ou commande introuvable :

  $ curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
  $ sudo apt install -y nodejs
  $ node --version  # Doit afficher v20.x.x


┌─────────────────────────────────────────────────────────────────────┐
│ ÉTAPE 3 : Installer les dépendances                                │
└─────────────────────────────────────────────────────────────────────┘

  $ npm install

  → Attendre 2-3 minutes


┌─────────────────────────────────────────────────────────────────────┐
│ ÉTAPE 4 : Configurer .env                                          │
└─────────────────────────────────────────────────────────────────────┘

  $ cp .env.example .env
  $ nano .env

  Remplir :
  ┌─────────────────────────────────────────────────────────────────┐
  │ VITE_SENTRY_DSN=https://xxxxx@sentry.io/xxxxx                   │
  │ VITE_PLAUSIBLE_DOMAIN=testing.mesnew.fr                         │
  │ VITE_APP_VERSION=1.0.0                                          │
  └─────────────────────────────────────────────────────────────────┘

  Sauvegarder : Ctrl+X → Y → Entrée


┌─────────────────────────────────────────────────────────────────────┐
│ ÉTAPE 5 : Builder le projet                                        │
└─────────────────────────────────────────────────────────────────────┘

  $ npm run build

  → Attendre 30-60 secondes
  → Le dossier dist/ est créé


┌─────────────────────────────────────────────────────────────────────┐
│ ÉTAPE 6 : Créer le répertoire web                                  │
└─────────────────────────────────────────────────────────────────────┘

  $ sudo mkdir -p /var/www/testing.mesnew.fr
  $ sudo cp -r dist/* /var/www/testing.mesnew.fr/
  $ sudo chown -R www-data:www-data /var/www/testing.mesnew.fr
  $ sudo chmod -R 755 /var/www/testing.mesnew.fr


┌─────────────────────────────────────────────────────────────────────┐
│ ÉTAPE 7 : Configurer Nginx                                         │
└─────────────────────────────────────────────────────────────────────┘

  A. Créer la config :

  $ sudo nano /etc/nginx/sites-available/testing.mesnew.fr

  B. Copier-coller le contenu du fichier nginx-config.conf
     (celui qui est dans le repo)

  C. Sauvegarder : Ctrl+X → Y → Entrée

  D. Activer le site :

  $ sudo ln -s /etc/nginx/sites-available/testing.mesnew.fr \
               /etc/nginx/sites-enabled/
  $ sudo nginx -t
  $ sudo systemctl reload nginx


┌─────────────────────────────────────────────────────────────────────┐
│ ÉTAPE 8 : Configurer HTTPS                                         │
└─────────────────────────────────────────────────────────────────────┘

  $ sudo apt install certbot python3-certbot-nginx -y
  $ sudo certbot --nginx -d testing.mesnew.fr

  → Répondre aux questions :
    - Email : votre-email@example.com
    - Accepter conditions : Y
    - Redirection HTTPS : 2 (Oui)


┌─────────────────────────────────────────────────────────────────────┐
│ ÉTAPE 9 : VÉRIFIER QUE ÇA FONCTIONNE                               │
└─────────────────────────────────────────────────────────────────────┘

  $ curl -I https://testing.mesnew.fr

  → Doit afficher : HTTP/2 200

  Dans le navigateur : https://testing.mesnew.fr

  ✅ Cadenas vert
  ✅ Site charge
  ✅ Pas d'erreurs dans la console (F12)


┌───────────────────────────────────────────────────────────────────────┐
│ 🔄 POUR METTRE À JOUR LE SITE PLUS TARD                              │
└───────────────────────────────────────────────────────────────────────┘

Méthode automatique :

  $ cd /chemin/vers/portfolio-threejs
  $ ./update-vps.sh

Méthode manuelle :

  $ cd /chemin/vers/portfolio-threejs
  $ git pull  # Si vous avez pushé des changements
  $ npm run build
  $ sudo cp -r dist/* /var/www/testing.mesnew.fr/


┌───────────────────────────────────────────────────────────────────────┐
│ 🐛 PROBLÈMES COURANTS                                                │
└───────────────────────────────────────────────────────────────────────┘

┌─ Site affiche "502 Bad Gateway" ──────────────────────────────────┐
│ $ sudo systemctl restart nginx                                    │
└───────────────────────────────────────────────────────────────────┘

┌─ Site affiche "403 Forbidden" ────────────────────────────────────┐
│ $ sudo chown -R www-data:www-data /var/www/testing.mesnew.fr     │
│ $ sudo chmod -R 755 /var/www/testing.mesnew.fr                   │
└───────────────────────────────────────────────────────────────────┘

┌─ DNS ne résout pas ───────────────────────────────────────────────┐
│ $ dig testing.mesnew.fr                                           │
│ → Attendre 10-15 minutes pour la propagation                     │
└───────────────────────────────────────────────────────────────────┘

┌─ Certbot échoue ──────────────────────────────────────────────────┐
│ $ sudo ufw allow 'Nginx Full'                                    │
│ $ sudo certbot --nginx -d testing.mesnew.fr                      │
└───────────────────────────────────────────────────────────────────┘


┌───────────────────────────────────────────────────────────────────────┐
│ 📚 FICHIERS DISPONIBLES                                              │
└───────────────────────────────────────────────────────────────────────┘

  • SETUP_ON_VPS.md        → Guide détaillé complet
  • VPS_QUICKSTART.txt     → Ce fichier (guide rapide)
  • setup-vps.sh           → Script d'installation automatique
  • update-vps.sh          → Script de mise à jour automatique
  • nginx-config.conf      → Configuration Nginx prête à l'emploi
  • DEPLOYMENT_VPS.md      → Guide complet avec troubleshooting


┌───────────────────────────────────────────────────────────────────────┐
│ 📞 COMMANDES UTILES                                                  │
└───────────────────────────────────────────────────────────────────────┘

  Voir les logs en temps réel :
  $ sudo tail -f /var/log/nginx/testing.mesnew.fr.access.log

  Vérifier l'espace disque :
  $ df -h

  Recharger Nginx :
  $ sudo nginx -t && sudo systemctl reload nginx

  Vérifier les processus :
  $ sudo systemctl status nginx


╔═══════════════════════════════════════════════════════════════════════╗
║                                                                       ║
║   ✅ VOUS ÊTES PRÊT !                                                ║
║                                                                       ║
║   Exécutez : ./setup-vps.sh                                          ║
║                                                                       ║
║   Ou suivez les étapes manuelles ci-dessus                           ║
║                                                                       ║
╚═══════════════════════════════════════════════════════════════════════╝
